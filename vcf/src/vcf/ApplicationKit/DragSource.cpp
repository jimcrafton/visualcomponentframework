//DragSource.cpp

/*
Copyright 2000-2004 The VCF Project.
Please see License.txt in the top level directory
where you installed the VCF.
*/


/* Generated by Together */
#include "vcf/ApplicationKit/ApplicationKit.h"


using namespace VCF;


DragSource::DragSource()
{
	dragDropPeer_ =  UIToolkit::createDragDropPeer();
	dragDropPeer_->setDragSource( this );
	actionType_ = daNone;
}

DragSource::~DragSource()
{
	delete dragDropPeer_;
}



void DragSource::startDragDrop( DataObject* data )
{
	if ( NULL != this->dragDropPeer_ ){
		DragSourceEvent event( this, data );

		clipboardDataObject_ = data;
		//copyDataToClipboard(); ?

		SourceBegin.fireEvent( &event );

		actionType_ = dragDropPeer_->startDragDrop( clipboardDataObject_ );
		//notify the end of the darg drop op
		SourceEnd.fireEvent( &event );

	}
}

void DragSource::copyDataToClipboard()
{
	//copy the data to the clipboard
	Clipboard* systemClipboard = UIToolkit::getSystemClipboard();
	if ( NULL != systemClipboard ){
		systemClipboard->copyTo( clipboardDataObject_ );
	}
}

void DragSource::setActionType( const DragActionType& actionType )
{
	actionType_ = actionType;	
}

DragActionType DragSource::getActionType()
{
	return this->actionType_;
}


/**
$Id$
*/
