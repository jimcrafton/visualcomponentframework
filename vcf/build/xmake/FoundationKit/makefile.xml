<make>

	<substitutions>
		<variable name="INC" value="../../../include"/>
		<variable name="SRC" value="../../../src"/>
		<variable name="GCC_INC" value="-I d:/cygwin/usr/include -I d:/cygwin/usr/include/g++-3"/>
		<variable name="LIB_OUT" value="../../../lib"/>
		<variable name="BIN_OUT" value="../../../bin"/>
		<!-- Note that this is a hack not sure what the correct thing to do 
		here for MINGW_INC, perhaps this should be an env variable ?-->
		<variable name="MINGW_INC" value="E:/mingw/include"/>
	</substitutions>

	
	<project name="FoundationKit" >
		<configurations>
			<config name="MinGW Debug" srcBinaryExt=".o">
				<compiler name="g++" >
					<flags>						
						<flag value="-I $(MINGW_INC)"/>
						<flag value="-I $(MINGW_INC)/g++-3"/>
						<flag value="-c"/>
						<flag value="-I $(INC)"/>
						<flag value="-DWIN32 -D_DEBUG -D_WINDOWS -D_MBCS -D_USRDLL -DFRAMEWORK_DLL"/>
						<flag value="-DFRAMEWORK_EXPORTS -DBUILD_FRAMEWORK_LIB"/>
					</flags>
				</compiler>	

				<linker name="dllwrap">
					<flags>
						<!-- the ldl flag is to link to the dynamic library routines for stuff like dlopen, etc-->
						<flag value="--driver-name c++ --implib $(LIB_OUT)/libFoundationKit.a"/>
						<flag value="-o $(BIN_OUT)/FoundationKit_mingw_d.dll --no-export-all-symbols --add-stdcall-alias"/>
					</flags>
				</linker>
			</config>

			<config name="GCC Debug" srcBinaryExt=".o">
				<compiler name="g++" >
					<flags>
						<flag value="-I $(INC)"/>
						<flag value="-c -DVCF_GCC -D_DEBUG -ggdb"/><!-- -fPIC"/ -->
					</flags>
				</compiler>	

				<linker name="g++">
					<flags>
						<!-- the ldl flag is to link to the dynamic library routines for stuff like dlopen, etc-->
						<flag value="-ggdb -ldl -lpthread -shared -o $(BIN_OUT)/libFoundationKit_d.so"/>
					</flags>
				</linker>
			</config>
			
			<config name="OSX-GCC Debug" srcBinaryExt=".o">
				<includes>
					<include path="$(INC)"/>
				</includes>
				<compiler name="g++" >
					<flags>
						<flag value="-I $(INC)"/>
						<flag value="-c -DVCF_GCC -DVCF_OSX -D_DEBUG -g"/><!-- -fPIC"/ -->
					</flags>
				</compiler>	

				<linker name="g++">
					<flags>
						<!-- the ldl flag is to link to the dynamic library routines for stuff like dlopen, etc-->
						<flag value="-g -ldl -shared -o $(BIN_OUT)/libFoundationKit_d.so"/>
					</flags>
				</linker>
			</config>
			
			<config name="GCC Release" srcBinaryExt=".o">
				<compiler name="g++" >
					<flags>
						<flag value="-I $(INC)"/>						
						<flag value="-c -DVCF_GCC -O2"/><!-- -fPIC"/ -->
					</flags>
				</compiler>	

				<linker name="g++">
					<flags>
						<!-- the ldl flag is to link to the dynamic library routines for stuff like dlopen, etc-->
						<flag value="-ldl -lpthread -shared -o $(BIN_OUT)/libFoundationKit.so"/>
					</flags>
				</linker>
			</config>
			
			<config name="GCC Static" srcBinaryExt=".o">
				<compiler name="g++" >
					<flags>
						<flag value="-I $(INC)"/>						
						<flag value="-c -DVCF_GCC -D_DEBUG"/>
					</flags>
				</compiler>	

				<linker name="ar">
					<flags>						
						<flag value="-cru $(LIB_OUT)/libFoundationKit_sd.a"/>
					</flags>
				</linker>
			</config>
			<config name="VC++ Debug" srcBinaryExt=".obj">
				<compiler name="cl" >
					<flags>
						<flag value="/I $(INC)"/>
						<flag value="/nologo /MDd /W3 /Gm /GR /GX /ZI /Od"/>
						<flag value="/D WIN32 /D _DEBUG /D _CONSOLE /D _MBCS /D FRAMEWORK_DLL /D FRAMEWORK_EXPORTS"/>
						<flag value="/c"/>
					</flags>
				</compiler>	
			</config>
			<config name="BCC55 Debug" srcBinaryExt=".obj">
				<compiler name="bcc32" >
					<flags>
						<flag value="-I$(INC)"/>
						<flag value="-I$(BCC_INC)"/>				
						<flag value="-RT"/>						
						<flag value="-DWIN32 -D_DEBUG -D_CONSOLE -D_MBCS -DFRAMEWORK_DLL -DFRAMEWORK_EXPORTS"/>
						<flag value="-c"/>
						<flag value="-L$(BCC_LIB)"/>
					</flags>
				</compiler>	
			</config>
		</configurations>

		<sources>
			<source name="$(SRC)/Exceptions/BasicException.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug|BCC55 Debug"/>
			<source name="$(SRC)/IO/BasicInputStream.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>
			<source name="$(SRC)/IO/BasicOutputStream.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>
			<source name="$(SRC)/core/Class.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>
			<source name="$(SRC)/core/ClassRegistry.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>
			<source name="$(SRC)/IO/Directory.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>
			<source name="$(SRC)/Utils/ErrorLog.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>
			<source name="$(SRC)/Events/Event.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>
			<source name="$(SRC)/Events/EventHandler.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>
			<source name="$(SRC)/IO/File.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>
			<source name="$(SRC)/Utils/FilePath.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>
			<source name="$(SRC)/IO/FileStream.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>
			<source name="$(SRC)/IO/FileUtils.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>
			<source name="$(SRC)/core/FoundationKit.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>
			<source name="$(SRC)/core/InterfaceClass.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>
			<source name="$(SRC)/Utils/Library.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>
			<source name="$(SRC)/core/Locales.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>
			<source name="$(SRC)/IO/MemoryStream.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>
			<source name="$(SRC)/Utils/Mutex.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>
			<source name="$(SRC)/core/Object.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>
			<source name="$(SRC)/core/ObjectWithEvents.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>
			<source name="$(SRC)/Utils/Parser.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>
			<source name="$(SRC)/core/Point.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>
			<source name="$(SRC)/Events/PropertyChangeEvent.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>
			<source name="$(SRC)/core/Rect.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>
			<source name="$(SRC)/Utils/Registry.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>
			<source name="$(SRC)/IO/Stream.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>
			<source name="$(SRC)/Utils/StringUtils.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>
			<source name="$(SRC)/Utils/System.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>
			<source name="$(SRC)/Utils/SystemToolkit.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>
			<source name="$(SRC)/IO/TextInputStream.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>
			<source name="$(SRC)/IO/TextOutputStream.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>
			<source name="$(SRC)/Utils/Thread.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>
			<source name="$(SRC)/Events/ThreadEvent.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>
			<source name="$(SRC)/core/VCFMath.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>			
			<source name="$(SRC)/Utils/VCFProcess.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>
			<source name="$(SRC)/Utils/XMLParser.cpp" partOfConfig="MinGW Debug|GCC Debug|OSX-GCC Debug|GCC Release|VC++ Debug"/>

			<!--Win32 Peers-->
<!--
			<source name="$(SRC)/ImplementerKit/Win32Peer.cpp" partOfConfig="MinGW Debug|VC++ Debug"/>
			<source name="$(SRC)/ImplementerKit/Win32FilePeer.cpp" partOfConfig="MinGW Debug|VC++ Debug"/>
			<source name="$(SRC)/ImplementerKit/Win32FileStream.cpp" partOfConfig="MinGW Debug|VC++ Debug"/>
			<source name="$(SRC)/ImplementerKit/Win32Thread.cpp" partOfConfig="MinGW Debug|VC++ Debug"/>
			<source name="$(SRC)/ImplementerKit/Win32LibraryPeer.cpp" partOfConfig="MinGW Debug|VC++ Debug"/>
			<source name="$(SRC)/ImplementerKit/Win32Mutex.cpp" partOfConfig="MinGW Debug|VC++ Debug"/>
			<source name="$(SRC)/ImplementerKit/Win32ProcessPeer.cpp" partOfConfig="MinGW Debug|VC++ Debug"/>
			<source name="$(SRC)/ImplementerKit/Win32Registry.cpp" partOfConfig="MinGW Debug|VC++ Debug"/>
			<source name="$(SRC)/ImplementerKit/Win32SemaphorePeer.cpp" partOfConfig="MinGW Debug|VC++ Debug"/>
			<source name="$(SRC)/ImplementerKit/Win32SystemPeer.cpp" partOfConfig="MinGW Debug|VC++ Debug"/>
			<source name="$(SRC)/ImplementerKit/Win32SystemToolkit.cpp" partOfConfig="MinGW Debug|VC++ Debug"/>
-->

			<!--Linux Peers-->
			<source name="$(SRC)/ImplementerKit/LinuxPeer.cpp" partOfConfig="GCC Debug|GCC Release"/>
			<source name="$(SRC)/ImplementerKit/LinuxFilePeer.cpp" partOfConfig="GCC Debug|GCC Release"/>
			<source name="$(SRC)/ImplementerKit/LinuxFileStream.cpp" partOfConfig="GCC Debug|GCC Release"/>
			<source name="$(SRC)/ImplementerKit/PosixThread.cpp" partOfConfig="GCC Debug|GCC Release"/>
			<source name="$(SRC)/ImplementerKit/LinuxLibraryPeer.cpp" partOfConfig="GCC Debug|GCC Release"/>
			<source name="$(SRC)/ImplementerKit/LinuxMutex.cpp" partOfConfig="GCC Debug|GCC Release"/>
			<source name="$(SRC)/ImplementerKit/LinuxProcessPeer.cpp" partOfConfig="GCC Debug|GCC Release"/>
			<source name="$(SRC)/ImplementerKit/LinuxRegistry.cpp" partOfConfig="GCC Debug|GCC Release"/>
			<source name="$(SRC)/ImplementerKit/LinuxSemaphorePeer.cpp" partOfConfig="GCC Debug|GCC Release"/>
			<source name="$(SRC)/ImplementerKit/LinuxSystemPeer.cpp" partOfConfig="GCC Debug|GCC Release"/>
			<source name="$(SRC)/ImplementerKit/LinuxSystemToolkit.cpp" partOfConfig="GCC Debug|GCC Release"/>
			<source name="$(SRC)/ImplementerKit/LinuxProcessIORedirector.cpp" partOfConfig="GCC Debug|GCC Release"/>
			
			<!-- OSX peers -->
			<source name="$(SRC)/ImplementerKit/OSXPeer.cpp" partOfConfig="OSX-GCC Debug"/>
			<source name="$(SRC)/ImplementerKit/OSXFilePeer.cpp" partOfConfig="OSX-GCC Debug"/>
			<source name="$(SRC)/ImplementerKit/OSXFileStream.cpp" partOfConfig="OSX-GCC Debug"/>
			<source name="$(SRC)/ImplementerKit/OSXThread.cpp" partOfConfig="OSX-GCC Debug"/>
			<source name="$(SRC)/ImplementerKit/OSXLibraryPeer.cpp" partOfConfig="OSX-GCC Debug"/>
			<source name="$(SRC)/ImplementerKit/OSXMutexPeer.cpp" partOfConfig="OSX-GCC Debug"/>
			<source name="$(SRC)/ImplementerKit/OSXProcessPeer.cpp" partOfConfig="OSX-GCC Debug"/>
			<source name="$(SRC)/ImplementerKit/OSXRegistry.cpp" partOfConfig="OSX-GCC Debug"/>
			<source name="$(SRC)/ImplementerKit/OSXSemaphorePeer.cpp" partOfConfig="OSX-GCC Debug"/>
			<source name="$(SRC)/ImplementerKit/OSXSystemPeer.cpp" partOfConfig="OSX-GCC Debug"/>
			<source name="$(SRC)/ImplementerKit/OSXSystemToolkit.cpp" partOfConfig="OSX-GCC Debug"/>
		</sources>
	</project>
</make>